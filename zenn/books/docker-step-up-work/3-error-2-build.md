---
title: "🖥️ ｜ 🐳 ｜ ビルドのエラーを調べられるようになろう"
---

# 目的・動機
Docker にまつわるエラーを調査できるようになりましょう。

このページは具体例を列挙して FAQ のように使うものではなく、イメージとコンテナとプロセスについての理解を深めることでエラーに自力で対処できる力をつけるのが目的です。

# ビルドがエラーを出す理由
いくつか考えられますが、いくつか例を挙げると次のようなものがあります。

## docker build がおかしい
次のような可能性があります。

- 単純に `-f` のパスが不一致
- Dockerfile に書いた `COPY` の相対パスと `docker build` のパスがずれている

これらは `docker build` が即時失敗するので容易に気付くことができます。

## Dockerfile の RUN がおかしい
ここはある意味では無限に可能性があります。

- `RUN apt get -y vi` と書いている
  - 正しくは `RUN apt install -y vim`
- `RUN git clone https://xxx/xxx/tool && sh ./install.sh` と書いている
  - `cd tool` を忘れている

これらも `docker build` が即時失敗するので容易に気付くことができますが、これらは本質的には Docker のエラーではありません。

`apt` のサブコマンドは `get` ではなく `install` というのは Linux の知識ですし、`cd tool` を忘れているのは作業手順の凡ミスです。

Dockerfile を読み書きする段階では Docker より Linux の知識が求められることの方が多いです。

自信がない場合は Ubuntu コンテナに `bash` で接続し PHP をインストールしたように、まずはベースイメージに手作業でインストールしてから Dockerfile に書き写していくと良いでしょう。

# エラーの原因を調べるには
いずれの場合も失敗するのは `docker build` なので、ターミナルの出力を見れば直接原因はすぐ見つかります。

そこから先で Docker の知識が必要か Linux の知識が必要かを正しく判断し、適切に調べたりヘルプを出したりできるようになるのが極めて大切です。
