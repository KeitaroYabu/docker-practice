---
title: "２部: ポートとは"
---

コンテナ内のサーバにホストマシンからアクセスするために、ポートについて理解します。

# このページで初登場するコマンドとオプション
## イメージをビルドする
```:新コマンド
$ docker container run [option] <image> [command]
```

```:旧コマンド
$ docker run [option] <image> [command]
```

### オプション
オプション | 意味 | 用途  
:-- | :-- | :--
`-p, --publish`   | コンテナのポートをホストマシンに公開する | ホストマシンからコンテナのサーバにアクセスする

# ポートとは
コンテナは基本的にはホストマシンから隔離されており、コンテナ内で Web サーバや DB サーバを起動してもそのままではホストマシンからアクセスすることはできません。

Web サーバなどいわゆるパブリックネットワークに置くようなコンテナでは、その問題を解決するためにポートの公開を行うことになります。

# コンテナ起動時に公開するポートを指定する
Docker Hub から [WordPress](https://hub.docker.com/_/wordpress) のイメージを取得してコンテナを起動します。

起動する時に `--publish host-machine:container` の形式でコンテナのポートをホストマシンのポートに割り当てることができます。

このとき `host-machine` 側のポートは起動する人が自由に決めますが、1024 未満のポートは特権ポートと言いあらかじめ用途が決められているポートになるので避けておくのが無難です。
今回は `8080` とします。

`container` 側のポートはコンテナ内で起動する WordPress サーバが起動するポートに合わせます。
マニュアルを見ると `80` で起動するようなので、今回は `80` とします。

以上を踏まえて、次のようにコンテナを起動します。

```:Host Machine
$ docker container run \
--name wordpress       \
--rm                   \
--publish 8080:80      \
--detach               \
wordpress:latest

205c64350cfae1ec86614d48c02994f28ad20fa767525d52a3b1dc275b42ea73

$
```

この状態でブラウザから localhost:8080 にアクセスすると、WordPress のセットアップガイドが表示されます。

todo image

これでコンテナにホストマシンからアクセスできるようになりました。
